<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>ユーザー管理画面</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
		<link th:href="@{/css/style.css}" rel="stylesheet">
	</head>
	
	<body>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
		
		<header th:replace="~{common/header :: header_fragment}"></header>
		
		<main>
			
			<div class="mx-2" 
				 th:with="url=${T(com.example.demo.constant.AppConst.Url)},
				 		  role=${T(com.example.demo.constant.AppConst.UserRole)}">
			
				<h1 class="mt-4">ユーザー管理画面</h1>
				
				<table class="text-center table table-striped table-bordered">
					<thead>
						<tr>
							<th>
								<a class="sort-link"
								   th:href="@{${url.VIEW_ALL_USERS}(sort='userId', order=${currentSort == 'userId' && currentOrder == 'asc' ? 'desc' : 'asc'})}">
									ユーザーID
								<span th:if="${currentSort == 'userId'}" 
									  th:text="${currentOrder == 'asc' ? '▲' : '▼'}"></span>
								</a>
							</th>
							<th>ユーザー名</th>
							<th>メールアドレス</th>
							<th>
								<a class="sort-link"
								   th:href="@{${url.VIEW_ALL_USERS}(sort='role', order=${currentSort == 'role' && currentOrder == 'asc' ? 'desc' : 'asc'})}">
									権限
								<span th:if="${currentSort == 'role'}" 
									  th:text="${currentOrder == 'asc' ? '▲' : '▼'}"></span>
								</a>
							</th>
							<th>登録日時</th>
							<th>更新日時</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="user : ${users}">
							
							<td>
								<a th:href="@{|${url.EDIT_USER}/${user.userId}|}" 
								   th:text="${user.userId}" 
								   class="sort-link">
								</a>
							</td>
							
							<td th:text="${user.name}"></td>
							
							<td th:text="${user.mailAddress}"></td>
							
							<td>
								<span th:if="${user.role == role.GENERAL}">一般</span>
								<span th:if="${user.role == role.ADMIN}">管理者</span>
							</td>
							
							<td th:text="${user.createdAt}"></td>
							
							<td th:text="${user.updatedAt}"></td>
							
						</tr>
						
					</tbody>
				</table>
			
			</div>
			
		</main>
	</body>
</html>